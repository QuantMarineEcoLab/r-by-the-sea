{
  "hash": "e4d49f429dd9367e0e163ad62df1d690",
  "result": {
    "markdown": "---\ntitle: 'Notes F'\nsubtitle: 'Joining tables with `dplyr`'\nformat:\n  html:\n    toc: true\n    code-overflow: wrap\n    code-fold: false\n    embed-resources: true\nexecute: \n  message: FALSE\n  warning: FALSE\n---\n\n\n\n# `portal` dataset \n\nThe Portal Project is a long-term ecological study being conducted near Portal, AZ. Since 1977, the site has been used to study the interactions among rodents, ants and plants and their respective responses to climate. To study the interactions among organisms, we experimentally manipulate access to 24 study plots. This study has produced over 100 scientific papers and is one of the longest running ecological studies in the U.S [(Pulled directly from the Portal Project Website)](https://portal.weecology.org/)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD PACKAGES\nlibrary(tidyverse)\n\n#LOAD DATA\n\n## Portal_rodent contains the rodent trapping data. Each individual of a target species is PIT tagged and data on species, location caught (plot and stake), sex, reproductive condition, weight, and hindfoot length are recorded. \nportal_rodent <- read.csv(\"https://github.com/weecology/PortalData/raw/main/Rodents/Portal_rodent.csv\")\n```\n:::\n\n\n# Warmup: \n\nUse `group_by()` and `summarize()` to find the mean, min, and max hindfoot length for each species (using `species`). Also add the number of observations.\n\n\n::: {.cell}\n\n:::\n\n\n\nWhat was the heaviest animal measured in each year? Return the columns `year`, `species`. Create line graph. \n\n\n::: {.cell}\n\n:::\n\n\n# Join dataframes\n\n## Matching key variable names\n\nWhat do the two letter `species_id`s really mean? Data on `species_id`s are provided in a dataset called `portal_species`. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Portal_rodent_species contains the species codes used in Portal_rodent.\nportal_species <- read.csv(\"https://raw.githubusercontent.com/weecology/PortalData/main/Rodents/Portal_rodent_species.csv\")\n```\n:::\n\n\n\nWe want to have all this information in one data frame instead of two separate data frames. \n\nThe variable `species` in `portal_rodents` match the variable `speciescode` in the `portal_species` dataset -- this is our *key variable*. In this case, they actually have different names, but this doesn't necessarily have to be true. \n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n## Multiple Key variables\n\nIn order to join the rotents sampling data and weather data frames, we need more than one key variable: `year`, `month` and `day`. This is because the combination of these 3 variables act to uniquely identify each observational unit in the weather data frame: hourly weather recordings in Portal, AZ.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nportal_weather <- read.csv(\"https://github.com/weecology/PortalData/raw/main/Weather/Portal_weather.csv\")\n\n#mean daily temperature\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#join\n```\n:::\n\n\n## Why is this useful? \n\nUpdating labels: \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# portal_rodent %>% \n#   drop_na(hfl) %>% \n#   group_by(species) %>% \n#   summarize(mean_hf = mean(hfl), min_hf = min(hfl), max_hf = max(hfl), count = n())\n\n#VS\n\n# portal_joined %>% \n#   drop_na(hfl) %>% \n#   group_by(commonname, scientificname) %>% \n#   summarize(mean_hf = mean(hfl), min_hf = min(hfl), max_hf = max(hfl), count = n())\n```\n:::\n\n\nExploring relationships between variables in separate tables: \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# portal_weather_joined %>% \n#   group_by(year, month, day) %>% \n#   summarize(count_caught = n(), mean_airtemp = mean_airtemp) %>% \n#   ggplot(aes(x=mean_airtemp, y=count_caught)) +\n#   geom_point() + \n#   geom_smooth(method='lm')\n```\n:::\n\n\n\n# Common Issues with Joining\n\n- duplicate keys\n- lowercase/uppercase\n- symbols or whitespace\n- Make sure the join fields are the same format.\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}