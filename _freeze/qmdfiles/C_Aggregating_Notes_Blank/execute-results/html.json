{
  "hash": "244868532fa294fe017ae2a640ad003a",
  "result": {
    "markdown": "---\ntitle: 'Notes C'\nsubtitle: 'Aggregating data with `summarize()`, `group_by()`'\nauthor: \"EMW\"\ndate: \"Tues, Jun 4, 2024\"\nformat:\n  html:\n    toc: true\n    code-overflow: wrap\n    code-fold: false\n    embed-resources: true\nexecute: \n  message: FALSE\n  warning: FALSE\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD PACKAGES \nlibrary(tidyverse)\n```\n:::\n\n\nToday's Dataset: `palmerpenguins`\nSize measurements, clutch observations, and blood isotope ratios for adult foraging Adélie, Chinstrap, and Gentoo penguins observed on islands in the Palmer Archipelago near Palmer Station, Antarctica. Data were collected and made available by Dr. Kristen Gorman and the Palmer Station Long Term Ecological Research (LTER) Program.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD DATA \nlibrary(palmerpenguins)\ndata(penguins)\n```\n:::\n\n\n\n# Clean up the data to remove rows with missing data\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins <- penguins %>%\n  drop_na()\n#sometimes this is appropriate...\n#sometimes dropping missing values might introduce bias into the study\n```\n:::\n\n\n# `summarize` Function or `summarise` Function (either works)\n\nSuppose we are interested in the average/mean bill length of all Adelie penguins: \n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>% \n  filter(species == \"Adelie\") %>% \n  summarize(Mean_bill_length = mean(bill_length_mm),\n            Mean_bill_depth = mean(bill_depth_mm))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 2\n  Mean_bill_length Mean_bill_depth\n             <dbl>           <dbl>\n1             38.8            18.3\n```\n:::\n:::\n\n\nSuppose we are interested in the average bill length AND average bill depth of all Adelie penguins: \n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>% \n  filter(species == \"Adelie\") %>% \n  summarize(Mean_bill_length = mean(bill_length_mm))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 1\n  Mean_bill_length\n             <dbl>\n1             38.8\n```\n:::\n:::\n\n\nThere are lots of other functions available: \n\n- `min`: minimum value\n- `max`: maximum value\n- `mean`: average or mean value\n- `median`: median value\n- `var`: variance \n- `sd`: standard deviation \n- `n`: count or number of values\n- `n_distinct`: counts number of distinct values\n\nSuppose we are interested in the average bill length AND the median bill length of all Adelie penguins: \n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>% \n  filter(species == \"Adelie\") %>% \n  summarize(mean_bill_length_mm = mean(bill_length_mm), \n              median_bill_length = median(bill_length_mm))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 2\n  mean_bill_length_mm median_bill_length\n                <dbl>              <dbl>\n1                38.8               38.8\n```\n:::\n:::\n\n\n# `group_by`\n\nLet's say we were interested in the average bill length and bill depth of all penguin species in this dataset. We could repeat this for the other species (Gentoo and Chinstrap). This would be a fair amount of work AND the results would not end up in the same table. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>% \n  group_by(species) %>%  \n  summarize(Mean_bill_length = mean(bill_length_mm),\n            Mean_bill_depth = mean(bill_depth_mm))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 3\n  species   Mean_bill_length Mean_bill_depth\n  <fct>                <dbl>           <dbl>\n1 Adelie                38.8            18.3\n2 Chinstrap             48.8            18.4\n3 Gentoo                47.6            15.0\n```\n:::\n:::\n\n\n## Multiple Groups\n\nSuppose we want the average bill length and average bill depth broken down by both species and sex: \n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>% \n  group_by(species, sex) %>%  \n  summarize(Mean_bill_length = mean(bill_length_mm),\n            Mean_bill_depth = mean(bill_depth_mm))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 4\n# Groups:   species [3]\n  species   sex    Mean_bill_length Mean_bill_depth\n  <fct>     <fct>             <dbl>           <dbl>\n1 Adelie    female             37.3            17.6\n2 Adelie    male               40.4            19.1\n3 Chinstrap female             46.6            17.6\n4 Chinstrap male               51.1            19.3\n5 Gentoo    female             45.6            14.2\n6 Gentoo    male               49.5            15.7\n```\n:::\n\n```{.r .cell-code}\npenguins %>% \n  group_by(sex, species) %>%  \n  summarize(Mean_bill_length = mean(bill_length_mm),\n            Mean_bill_depth = mean(bill_depth_mm))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 4\n# Groups:   sex [2]\n  sex    species   Mean_bill_length Mean_bill_depth\n  <fct>  <fct>                <dbl>           <dbl>\n1 female Adelie                37.3            17.6\n2 female Chinstrap             46.6            17.6\n3 female Gentoo                45.6            14.2\n4 male   Adelie                40.4            19.1\n5 male   Chinstrap             51.1            19.3\n6 male   Gentoo                49.5            15.7\n```\n:::\n:::\n\n\n# More Practice\n\nSuppose we want to calculate the number of distinct islands each species is found on:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>% \n  group_by(species) %>% \n  summarize(no_distinct_islands = n_distinct(island))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  species   no_distinct_islands\n  <fct>                   <int>\n1 Adelie                      3\n2 Chinstrap                   1\n3 Gentoo                      1\n```\n:::\n:::\n\n\nSuppose we are interested in how many penguins of each species are on each island in the year 2007 (with measurement data available): \n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>% \n  filter(year == 2007) %>% \n  group_by(species, island) %>% \n  summarize(count=n())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 3\n# Groups:   species [3]\n  species   island    count\n  <fct>     <fct>     <int>\n1 Adelie    Biscoe       10\n2 Adelie    Dream        19\n3 Adelie    Torgersen    15\n4 Chinstrap Dream        26\n5 Gentoo    Biscoe       33\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}