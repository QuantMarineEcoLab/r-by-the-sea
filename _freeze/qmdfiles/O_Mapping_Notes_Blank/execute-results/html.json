{
  "hash": "096f4fb2b3267995de47833fa87dc0ea",
  "result": {
    "markdown": "---\ntitle: \"Notes O \"\nsubtitle: \"Mapping in R\"\nformat:\n  html:\n    toc: true\n    code-overflow: wrap\n    code-fold: false\n    embed-resources: true\nexecute: \n  message: FALSE\n  warning: FALSE\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n### Before we get started, some context:\n\n- `R` is ***fantastic*** for spacial analysis (not covered in this class... look for classes related to spacial statistics)\n- `R` is *great* for interactive data visualization (via `leaflet` or `shiny`... more on this on Thursday)\n- `R` is *okay* at spacial data visualization (creating maps).\n  - There are many different packages in `R` for creating maps. I've found that different packages perform best for different maps. We will talk about a few different ones today. \n  -  If you have a highly map-centric project, there is nothing wrong with working in ArcGIS or QGIS if you find the mapping tools in R insufficient. There are many recent improvements with new packages (like `sp`, `rgdal` and `rgeos`) which profiles much of the functionality of GIS packages! Exciting! (not very beginner friendly - requires familiarity with GIS concepts)\n\n# Using the `maps` package\n\nPerhaps the simplest approach to drawing maps is to use `geom_polygon()` to draw boundaries for different regions.\n\nThe `maps` package contains several built in maps: world (for all countries in the world), france, italy, nz, usa, state (usa state boundaries), and county (usa counties). The maps package isn’t particularly accurate or up-to-date, but it’s built into R so it’s an easy place to start.\n\nTo reference each map you use `map_data(\"mapname\")`. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD PACKAGES\nlibrary(tidyverse)\nlibrary(maps)\n\n#LOAD DATA\nworld_map <- map_data(\"world\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#World Map\n```\n:::\n\n\n\n## What about subsetting the data? \n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Subset to get Italy\n\n\n#Subset to get USA\n```\n:::\n\n\n\n## What if aspect ratio is not maintained? \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ASPECT RATIO NOT MAINTAINED\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# ASPECT RATIO MAINTAINED\n```\n:::\n\n\n## USA with states\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Load Data from maps\nusa_states <- map_data(\"state\")\n\n\n#Plot of USA with state borders\n```\n:::\n\n\n\n## How to customize colors? \n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Load Data from maps and plot colors by latitude\nusa_states <- map_data(\"state\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD PACKAGES\nlibrary(tidyverse)\nlibrary(leaflet)\n```\n:::\n\n\n\n\n\n\n# Interactive maps using `leaflet` \n\n[`leaflet` is an open-source JavaScript library that is used to create dynamic online maps.](https://bookdown.org/nicohahn/making_maps_with_r5/docs/leaflet.html) The identically named R package makes it possible to create these kinds of maps in R as well.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nleaflet() %>%\n  addTiles() %>%\n  setView(lng = -70.61, lat = 42.99, zoom = 5) \n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"leaflet html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-2a5c448df0fb6a858507\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-2a5c448df0fb6a858507\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org\\\">OpenStreetMap<\\/a> contributors, <a href=\\\"https://creativecommons.org/licenses/by-sa/2.0/\\\">CC-BY-SA<\\/a>\"}]}],\"setView\":[[42.99,-70.61],5,[]]},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Download Shoals intertidal transect data coordinates\ntransect_info <- read.csv(file = 'https://portal.edirepository.org/nis/dataviewer?packageid=edi.236.1&entityid=29e551611c670b81c4aae9d2a2d82e7b')\n\ntransect_info$lat <- transect_info$Lat_deg+transect_info$Lat_min/60\ntransect_info$long <- -transect_info$Long_deg-transect_info$Long_min/60\n\nleaflet() %>%\n  addTiles() %>%\n  setView(lng = -70.61, lat = 42.99, zoom = 13) \n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"leaflet html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-07bf8a9d4c3a008af684\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-07bf8a9d4c3a008af684\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org\\\">OpenStreetMap<\\/a> contributors, <a href=\\\"https://creativecommons.org/licenses/by-sa/2.0/\\\">CC-BY-SA<\\/a>\"}]}],\"setView\":[[42.99,-70.61],13,[]]},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n\n## Adding points\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# use addCircleMarkers to add data\n```\n:::\n\n\n\n## Different backgrounds\n\n::: {.cell}\n\n```{.r .cell-code}\n# Use addProviderTiles(providers$Esri.WorldImagery)\n```\n:::\n\n\n## Different colors\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntransect_info$color = ifelse(transect_info$Position=='sheltered', 'blue', 'red')\n```\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<script src=\"../site_libs/jquery-1.12.4/jquery.min.js\"></script>\n<link href=\"../site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"../site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/leaflet-binding-2.1.2/leaflet.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}